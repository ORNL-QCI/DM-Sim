# ---------------------------------------------------------------------------
# File: Makefile_sample
# Sample Makefile. When using dmsim_gen_cir.py and dmsim_qasm_ass.py, Makefile
# should be auto-generated.
# ---------------------------------------------------------------------------
# See our SC-20 paper for detail.
# Ang Li, Scientist, Pacific Northwest National Laboratory(PNNL), U.S.
# Homepage: http://www.angliphd.com
# GitHub repo: http://www.github.com/pnnl/DM-Sim
# PNNL-IPID: 31919-E, ECCN: EAR99, IR: PNNL-SA-143160
# BSD Lincese.
# ---------------------------------------------------------------------------

CC = nvcc
FLAGS = -O3 -arch=sm_70 -rdc=true
LIBS = -lm

all: dmsim_omp dmsim_mpi dmsim_sin

dmsim_omp: dmsim_omp.cu gate.cuh configuration.h circuit.cuh util.cuh
	$(CC) $(FLAGS) $(LIBS) -Xcompiler -fopenmp dmsim_omp.cu -o $@

dmsim_mpi: dmsim_mpi.cu gate.cuh configuration.h circuit.cuh util.cuh
	$(CC) $(FLAGS) $(LIBS) -ccbin mpicc dmsim_mpi.cu -o $@

dmsim_sin: dmsim_sin.cu gate.cuh configuration.h circuit.cuh util.cuh
	$(CC) $(FLAGS) $(LIBS) dmsim_sin.cu -o $@

clean:
	rm -rf *.o dmsim_omp dmsim_mpi dmsim_sin
